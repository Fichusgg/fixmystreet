var idbKeyval=function(e){function f(a){return new Promise(function(b,d){a.oncomplete=a.onsuccess=function(){return b(a.result)};a.onabort=a.onerror=function(){return d(a.error)}})}function h(){if(c)return c;var a=indexedDB.open("keyval-store");a.onupgradeneeded=function(){return a.result.createObjectStore("keyval")};c=f(a);c.then(function(b){b.onclose=function(){return c=void 0}},function(){});return c}function g(a,b){return h().then(function(d){return b(d.transaction("keyval",a).objectStore("keyval"))})}
var c;e.get=function(a){return g("readonly",function(b){return f(b.get(a))})};e.set=function(a,b){return g("readwrite",function(d){d.put(b,a);return f(d.transaction)})};e.del=function(a){return g("readwrite",function(b){b.delete(a);return f(b.transaction)})};e.close=function(){return h().then(function(a){a.close();c=null})};return e}({});
